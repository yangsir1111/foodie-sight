📱拍照识别热量 H5 应用需求文档
一、项目概述
本项目是一个基于 H5 的轻量级前端应用，面向移动端用户。用户可以通过拍照或上传照片的方式识别食物的种类及热量信息。识别功能由通义千问图像理解模型提供。用户的识别历史会保存在本地，供用户随时查看和管理。
二、功能概述
应用包含两个核心页面 Tab：
识别页面：拍照或上传图片，调用图像识别模型，返回热量信息及建议；
我的页面：展示历史识别记录，支持删除单条记录。
三、页面结构与交互流程
1. 识别页（Tab 一）
1.1 页面元素
按钮：📷 拍照
按钮：📁 上传照片
图片预览区（选中或拍摄后展示）
文本区域（展示识别结果及热量建议）
Tab 导航：识别｜我的
1.2 功能说明
功能
描述
拍照
调用移动端摄像头，拍摄后展示预览图
上传照片
打开相册选择图片，上传后展示预览图
图像识别
拍摄/上传后自动调用通义千问图像模型，返回食物名称、热量数值和饮食建议
保存记录
识别成功后自动将结果存入 localStorage，包含图片、识别结果、时间戳
1.3 异常处理
图片识别失败时，提示“识别失败，请尝试其他角度或更清晰的图片”
模型接口请求失败，提示“网络异常，请稍后重试”
2. 我的页（Tab 二）
2.1 页面元素
按钮：📜 历史（可省略，仅作装饰性或分组用）
列表：历史记录条目（图片缩略图 + 识别结果）
按钮：🗑 删除（每条记录后）
Tab 导航：识别｜我的
2.2 功能说明
功能
描述
展示历史记录
从 localStorage 中读取数据，按时间倒序展示
删除记录
点击“删除”按钮，移除对应记录并更新存储
四、数据结构设计
1. 本地存储结构（localStorage）
{  "history": [    {      "id": "uuid", // 唯一标识符      "image": "base64/image/url", // 图片路径或base64数据      "foodName": "汉堡",      "calories": 450,      "advice": "建议搭配蔬菜降低脂肪摄入",      "timestamp": "2025-09-01T10:30:00Z"    },    ...  ]}
五、技术实现建议
1. 图像识别接口（通义千问）
输入：图片文件或 base64 编码
输出示例：
{  "foodName": "牛肉面",  "calories": 320,  "advice": "适量食用，注意控制碳水化合物"}
网络请求：采用 fetch / axios 进行异步请求
错误处理：超时、返回异常、无识别结果等需妥善提示
2. 图片处理
拍照：通过 <input type="file" accept="image/*" capture="environment"> 实现
上传：通过 <input type="file" accept="image/*"> 实现
预览：可使用 URL.createObjectURL 或读取 base64 数据展示图片
3. 本地存储（localStorage）
存储格式为 JSON 字符串
初始化页面时同步读取和渲染
删除后立即更新存储和 UI